//*********************************************************************************************************************************************************************************
// nws_clkset_userif_NC7.c
/*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 * Release Information.
 *---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 *
 * Version:		N-C7 	   - v090
 * Date:		01/10/2020
 * Modifier:	Emilio R. La Greca
 *
 * Original release.
 *
 *-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

#include		<com_defn.h>
#include		<nws_clnscn_common.h>

#include		<uitftdsp.h>
#include		<uitftdsp_button.h>
#include		<uitftdsp_image.h>
#include		<uicommon.h>
#include        <tftdspif.h>
#include		<nws_access_common.h>

//*********************************************************************************************************************************************************************************
// MODULE
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// CONSTANTS
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
static const char 	mkstrTopStatusText[]  = "MENU - CLEAN SCREEN";

static uint8_t		mucCleanScreenTimeoutTime;
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Text details
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Number - Use as index to mkaText[]
typedef enum	NWS_SVCINF_USERIF_NC7__TEXT_NUMBER {

	NWS_CLNSCN_USERIF_NC7__TN__PROMPT_LINE1 = 0,
	NWS_CLNSCN_USERIF_NC7__TN__PROMPT_LINE2 = 1,
	NWS_CLNSCN_USERIF_NC7__TN__PROMPT_LINE3 = 2,

} NWS_SVCINF_USERIF_NC7__TEXT_NUMBER;
//
// Array of texts
static const UITFTDSP_TEXT__TextDetails		mkaText[] = {

	//   X,   Y,  X0,  Y0, 			        Color,        		      FontSize,  		    Justification, String Label
	{   25,  66,  -1,  -1,  UITFTDSP_COLOR__WHITE, UITFTDSP_FONTS__FS__ROUND_2,   UITFTDSP_TEXT__TJ__LEFT, "Screen deactivated to allow cleaning - Reactivation in:" 				},  // 0
	{   25, 220,  -1,  -1,  UITFTDSP_COLOR__WHITE, UITFTDSP_FONTS__FS__ROUND_1,   UITFTDSP_TEXT__TJ__LEFT, "When cleaning the screen DO NOT use water as this may interfere with" 	},  // 1
	{   25, 240,  -1,  -1,  UITFTDSP_COLOR__WHITE, UITFTDSP_FONTS__FS__ROUND_1,   UITFTDSP_TEXT__TJ__LEFT, "the electronics.  Use a dry cloth to wipe the screen." 					}, 	// 2
};
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Number Details
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Number - Use as index to mkaNumber[]
typedef enum	NWS_CLNSCN_USERIF_NC7__NUMBER_NUMBER {

	NWS_CLNSCN_USERIF_NC7__NN__COUNTDOWN_TIMER = 0,

} NWS_CLNSCN_USERIF_NC7__NUMBER_NUMBER;
//
// Array of numbers
static const UI_TFTNUMBER__NumberDetails	mkaNumber[] = {

	{   230,  110, UITFTDSP_COLOR__WHITE, UITFTDSP_FONTS__FS__CUSTOM_0,   UITFTDSP_TEXT__TJ__CENTER, (uint8_t*)&mucCleanScreenTimeoutTime },
};
//
// Macro definition to simplify function calls : X = NWS_CLNSCN_USERIF_NC7__NUMBER_NUMBER type which indexes array
#define NWS_CLNSCN_USERIF_NC7__Number(X)		( (UI_TFTNUMBER__NumberDetails*)&mkaNumber[X] )
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// VARIABLES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// SAVED VALUES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// TIMING
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// FUNCTION DECLARES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//*********************************************************************************************************************************************************************************


//*********************************************************************************************************************************************************************************
// APPLICATION
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// VARIABLES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// FUNCTION DEFINITIONS
/*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 * @brief:	pCleanScreen data ready for processing once this state is entered.
 * @param:	pCleanScreen - Pointer to clean screen access info.
 * @retval:	None.
 *-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
void							NWS_CLNSCN_USERIF_NC7__InitBeforeStateEntry(NWS_CLNSCN_COMMON__ControlDetails* pCleanScreen)
{
    return;
}
/*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 * @brief:	Clean screen display update.
 * @param:	pCleanScreen - Pointer to clean screen access info.
 * @retval:	None.
 *-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
void							NWS_CLNSCN_USERIF_NC7__UpdateDisplay(NWS_CLNSCN_COMMON__ControlDetails* pCleanScreen)
{
	UICOMMON__TopStatusDetails	TopStatus;

    // Top status line update
    // - Init structure
	UICOMMON__TopStatus_InitStructure( &TopStatus );
	// - Define requirements
	TopStatus.pstrTextToDisplay = (char*)mkstrTopStatusText;
    // - Perform update
	UICOMMON__TopStatus_Update( &TopStatus );
	//
	// Screen update
	// - Define timeout time and show it
	mucCleanScreenTimeoutTime = (uint8_t)(pCleanScreen->AutoExitDelayTimingCounter.ulValue / 100);

	UICOMMON__ShowLargeNumber( NWS_CLNSCN_USERIF_NC7__Number(NWS_CLNSCN_USERIF_NC7__NN__COUNTDOWN_TIMER) );
	// - Show pronpts
	UITFTDSP__ShowTextAbsolute( (UITFTDSP_TEXT__TextDetails*)&mkaText[NWS_CLNSCN_USERIF_NC7__TN__PROMPT_LINE1] );
	UITFTDSP__ShowTextAbsolute( (UITFTDSP_TEXT__TextDetails*)&mkaText[NWS_CLNSCN_USERIF_NC7__TN__PROMPT_LINE2] );
	UITFTDSP__ShowTextAbsolute( (UITFTDSP_TEXT__TextDetails*)&mkaText[NWS_CLNSCN_USERIF_NC7__TN__PROMPT_LINE3] );

	return;
}
/*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 * @brief:	Clean screen control update.
 * @param:	pCleanScreen - Pointer to clean screen access info.
 * @retval:	None.
 *-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
void							NWS_CLNSCN_USERIF_NC7__UpdateControl(NWS_CLNSCN_COMMON__ControlDetails* pCleanScreen)
{
	return;
}
//*********************************************************************************************************************************************************************************
