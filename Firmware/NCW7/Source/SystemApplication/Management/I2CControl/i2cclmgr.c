//*********************************************************************************************************************************************************************************
// i2cclmgr.c
/*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 * Release Information.
 *---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 *
 * Version:		N-C7 	   - v090
 * Date:		01/10/2020
 * Modifier:	Emilio R. La Greca
 *
 * Original release.
 *
 *-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

#include		<com_defn.h>
#include		<nvmifmgr.h>
#include		<i2ccomif.h>

//*********************************************************************************************************************************************************************************
// MODULE
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// CONSTANTS
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#define			I2CCLMGR_MAX_PROCESSES		1		// Number of processes

typedef enum	I2C_PROCESS
{
	IP_NVMIFMGR = 0

} I2C_PROCESS;
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// VARIABLES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
static I2C_PROCESS	mI2CBusProcess;
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// SAVED VALUES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// TIMING
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// FUNCTION DECLARES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//*********************************************************************************************************************************************************************************


//*********************************************************************************************************************************************************************************
// APPLICATION
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// VARIABLES
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// FUNCTION DEFINITIONS
/*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 * @brief:	I2C control manager interface initialisation.
 * @param:  None.
 * @retval: None.
 *-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
void			I2CCLMGR_Initialise(void)
{
	mI2CBusProcess = IP_NVMIFMGR;
	return;
}
/*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 * @brief:	I2C control manager interface update.
 * @param:  None.
 * @retval: None.
 *-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
void			I2CCLMGR_Update(void)
{
	switch ( mI2CBusProcess )
	{
		case IP_NVMIFMGR:
			// Process - Nonvolatile memory access with I2C device
			// - Update
			NVMIFMGR__Update();
			// - Check if device is being accessed
			if ( !NVMIFMGR__bDeviceAccessRequired() ) { mI2CBusProcess++; }
			break;
	}

	if ( (uint8_t)mI2CBusProcess >= I2CCLMGR_MAX_PROCESSES )
	{
		mI2CBusProcess = IP_NVMIFMGR;
	}

	I2CCOMIF__Update();

	return;
}
//*********************************************************************************************************************************************************************************
